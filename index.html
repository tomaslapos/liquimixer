<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LiquiMixer - E-liquid Kalkul√°tor</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Kalkul√°tor pro m√≠ch√°n√≠ e-liquid≈Ø s retro neon designem">
    <meta name="theme-color" content="#ff00ff">
    <meta name="background-color" content="#0a0a15">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LiquiMixer">
    <meta name="application-name" content="LiquiMixer">
    <meta name="msapplication-TileColor" content="#ff00ff">
    <meta name="msapplication-navbutton-color" content="#ff00ff">
    
    <!-- Security -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.jsdelivr.net https://*.clerk.accounts.dev https://*.clerk.com https://clerk.liquimixer.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://*.clerk.accounts.dev;
        font-src 'self' https://fonts.gstatic.com;
        img-src 'self' data: https: blob:;
        connect-src 'self' https://*.supabase.co https://*.clerk.accounts.dev https://*.clerk.com wss://*.supabase.co;
        frame-src 'self' https://*.clerk.accounts.dev https://*.clerk.com https://accounts.google.com https://www.facebook.com https://appleid.apple.com;
        upgrade-insecure-requests;
    ">
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="DENY">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/svg+xml" href="/icons/icon.svg">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192.png">
    
    <!-- Fonts & Styles -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css">
    
    <!-- Clerk Authentication -->
    <script 
        async 
        crossorigin="anonymous" 
        data-clerk-publishable-key="pk_test_c3Rhci1jaG93LTQ1LmNsZXJrLmFjY291bnRzLmRldiQ"
        src="https://cdn.jsdelivr.net/npm/@clerk/clerk-js@latest/dist/clerk.browser.js"
        type="text/javascript">
    </script>
    
    <!-- Supabase Database -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="/database.js"></script>
    <script src="/subscription.js"></script>
    <script src="/i18n.js"></script>
</head>
<body>
    <div class="neon-grid"></div>
    <div class="neon-clouds">
        <!-- Lev√° strana -->
        <div class="cloud cloud-left-1"></div>
        <div class="cloud cloud-left-2"></div>
        <div class="cloud cloud-left-3"></div>
        <div class="cloud cloud-left-4"></div>
        <div class="cloud cloud-left-5"></div>
        <div class="cloud cloud-left-6"></div>
        <!-- Prav√° strana -->
        <div class="cloud cloud-right-1"></div>
        <div class="cloud cloud-right-2"></div>
        <div class="cloud cloud-right-3"></div>
        <div class="cloud cloud-right-4"></div>
        <div class="cloud cloud-right-5"></div>
        <div class="cloud cloud-right-6"></div>
    </div>
    
    <div class="container">
        <!-- Horn√≠ navigace -->
        <nav class="top-nav">
            <div class="nav-buttons">
                <button class="nav-btn menu-btn" onclick="toggleMenu()">
                    <span class="nav-icon">‚ò∞</span>
                    <span class="nav-text">Menu</span>
                </button>
                <button class="nav-btn login-btn" onclick="showLoginModal()">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-text">P≈ôihl√°≈°en√≠</span>
                </button>
            </div>
        </nav>

        <!-- Menu dropdown -->
        <div id="menuDropdown" class="menu-dropdown hidden">
            <div class="menu-content">
                <button class="menu-close" onclick="toggleMenu()">‚úï</button>
                <h3 class="menu-title">Menu</h3>
                <div class="menu-section">
                    <h4 class="menu-section-title">Cookies</h4>
                    <p class="menu-text">
                        Firma WOOs neshroma≈æƒèuje ≈æ√°dn√© cookies. Tato aplikace nepou≈æ√≠v√° sledovac√≠ cookies, 
                        analytick√© cookies ani cookies t≈ôet√≠ch stran. Va≈°e soukrom√≠ je pro n√°s prioritou.
                    </p>
                </div>
                <div class="menu-section">
                    <h4 class="menu-section-title">GDPR a ochrana osobn√≠ch √∫daj≈Ø</h4>
                    <p class="menu-text">
                        Osobn√≠ √∫daje jsou ukl√°d√°ny v√Ωhradnƒõ pro intern√≠ pou≈æit√≠ firmy WOOs za √∫ƒçelem 
                        p≈ôihl√°≈°en√≠ u≈æivatele do aplikace. Va≈°e √∫daje nejsou sd√≠leny s t≈ôet√≠mi stranami 
                        ani pou≈æ√≠v√°ny pro marketingov√© √∫ƒçely. M√°te pr√°vo po≈æ√°dat o v√Ωmaz sv√Ωch √∫daj≈Ø 
                        kdykoli kontaktov√°n√≠m firmy WOOs.
                    </p>
                </div>
                <div class="menu-section">
                    <h4 class="menu-section-title">Kontaktn√≠ formul√°≈ô</h4>
                    <form class="contact-form" onsubmit="return handleContact(event)">
                        <div class="form-group-login">
                            <label class="login-label">V√°≈° e-mail</label>
                            <input type="email" id="contactEmail" class="login-input" placeholder="vas@email.cz" required>
                        </div>
                        <div class="form-group-login">
                            <label class="login-label">P≈ôedmƒõt</label>
                            <input type="text" id="contactSubject" class="login-input" placeholder="T√©ma zpr√°vy" required>
                        </div>
                        <div class="form-group-login">
                            <label class="login-label">Zpr√°va</label>
                            <textarea id="contactMessage" class="login-input contact-textarea" placeholder="Va≈°e zpr√°va..." required></textarea>
                        </div>
                        <button type="submit" class="neon-button contact-submit">Odeslat zpr√°vu</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- Login modal -->
        <div id="loginModal" class="login-modal hidden">
            <div class="login-content">
                <button class="menu-close" onclick="hideLoginModal()">‚úï</button>
                <h3 class="menu-title">P≈ôihl√°≈°en√≠</h3>
                <div id="clerk-sign-in"></div>
            </div>
        </div>
        
        <!-- User Profile modal -->
        <div id="userProfileModal" class="login-modal hidden">
            <div class="login-content">
                <button class="menu-close" onclick="hideUserProfileModal()">‚úï</button>
                <h3 class="menu-title">M≈Øj √∫ƒçet</h3>
                <div id="clerk-user-profile"></div>
            </div>
        </div>

        <!-- √övodn√≠ str√°nka -->
        <section id="intro" class="page active">
            <div class="logo-container">
                <h1 class="neon-title">
                    <span class="letter l1">L</span>
                    <span class="letter l2">I</span>
                    <span class="letter l3">Q</span>
                    <span class="letter l4">U</span>
                    <span class="letter l5">I</span>
                    <span class="letter l6">M</span>
                    <span class="letter l7">I</span>
                    <span class="letter l8">X</span>
                    <span class="letter l9">E</span>
                    <span class="letter l10">R</span>
                </h1>
                <div class="subtitle">E-LIQUID KALKUL√ÅTOR</div>
            </div>
            
            <div class="warning-box">
                <h2 class="warning-title">P≈ôi m√≠ch√°n√≠ se soust≈ôeƒète na dodr≈æov√°n√≠ bezpeƒçnostn√≠ch z√°sad</h2>
                <p class="warning-text">
                    P≈ôi m√≠ch√°n√≠ e-liquidu v≈ædy noste ochrann√© rukavice a pracujte v dob≈ôe vƒõtran√©m prostoru, 
                    zejm√©na pokud pou≈æ√≠v√°te nikotinov√© boostery. Pou≈æ√≠vejte pouze kvalitn√≠ slo≈æky bez p≈ô√≠mƒõs√≠ 
                    a s potravin√°≈ôskou certifikac√≠ vhodn√© pro vapov√°n√≠ od ovƒõ≈ôen√Ωch dodavatel≈Ø. 
                    Dodr≈æujte p≈ôesn√© pomƒõry ingredienc√≠. Hotov√Ω liquid skladujte mimo dosah dƒõt√≠ a zv√≠≈ôat.
                </p>
            </div>
            
            <div class="prep-box">
                <h3 class="prep-title">P≈ôed m√≠ch√°n√≠m si p≈ôipravte:</h3>
                <div class="prep-grid">
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Propylenglykol (PG)</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>Propylenglykol je bezbarv√° kapalina bez z√°pachu, kter√° tvo≈ô√≠ z√°klad e-liquid≈Ø. Zaji≈°≈•uje p≈ôenos chuti a vytv√°≈ô√≠ charakteristick√Ω "throat hit" (pocit v krku). Je hygroskopick√Ω, proto jej skladujte v uzav≈ôen√© n√°dobƒõ. PG je obecnƒõ pova≈æov√°n za bezpeƒçn√Ω pro inhalaci a pou≈æ√≠v√° se i v potravin√°≈ôstv√≠ a farmacii.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Rostlinn√Ω glycerin (VG)</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>Rostlinn√Ω glycerin je hust√°, sladk√° kapalina z√≠sk√°van√° z rostlinn√Ωch olej≈Ø. Je zodpovƒõdn√Ω za tvorbu hust√©ho d√Ωmu a dod√°v√° liquidu jemnou sladkost. ƒå√≠m vy≈°≈°√≠ pomƒõr VG, t√≠m hustƒõj≈°√≠ p√°ra, ale m√©nƒõ v√Ωrazn√° chu≈•. VG je vhodn√Ω pro p≈ô√≠m√© vdechov√°n√≠ (DL) a v√Ωkonn√© vapovac√≠ za≈ô√≠zen√≠.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Volitelnƒõ p≈ô√≠chutƒõ</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>P≈ô√≠chutƒõ pro e-liquidy jsou koncentrovan√© aromata speci√°lnƒõ urƒçen√© pro vapov√°n√≠. Pou≈æ√≠vejte v√Ωhradnƒõ p≈ô√≠chutƒõ urƒçen√© pro e-liquidy, nikoliv potravin√°≈ôsk√° aromata! Koncentrace se obvykle pohybuje mezi 5-20% podle typu p≈ô√≠chutƒõ. Ovocn√© p≈ô√≠chutƒõ jsou intenzivnƒõj≈°√≠, dezertn√≠ a tab√°kov√© vy≈æaduj√≠ vy≈°≈°√≠ procento a del≈°√≠ zr√°n√≠.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Nikotin booster nebo s≈Øl</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p><strong>Nikotin booster:</strong> Tradiƒçn√≠ forma nikotinu s v√Ωraznƒõj≈°√≠m throat hitem. Vhodn√Ω pro bƒõ≈æn√© vapov√°n√≠.<br><br><strong>Nikotinov√° s≈Øl:</strong> Jemnƒõj≈°√≠ forma nikotinu, kter√° se rychleji vst≈ôeb√°v√° a m√° slab≈°√≠ throat hit i p≈ôi vy≈°≈°√≠ch koncentrac√≠ch. Vhodn√° pro pod syst√©my a MTL za≈ô√≠zen√≠. POZOR: Nikotin je jed! V≈ædy pou≈æ√≠vejte rukavice a pracujte v dob≈ôe vƒõtran√©m prostoru.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Zdravotnick√© rukavice</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>Nitrylov√© nebo latexov√© rukavice jsou nezbytn√© p≈ôi pr√°ci s nikotinem. Nikotin se snadno vst≈ôeb√°v√° k≈Ø≈æ√≠ a m≈Ø≈æe zp≈Øsobit otravu. Rukavice tak√© chr√°n√≠ p≈ôed kontaminac√≠ smƒõsi a udr≈æuj√≠ sterilitu. Pou≈æ√≠vejte jednor√°zov√© rukavice a po pr√°ci je bezpeƒçnƒõ zlikvidujte. P≈ôi pot≈ô√≠snƒõn√≠ poko≈æky nikotinem d≈Økladnƒõ omyjte m√Ωdlem a vodou.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Pr√°zdn√° sklenƒõn√° lahviƒçka</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>Sklenƒõn√© lahviƒçky jsou ide√°ln√≠ pro skladov√°n√≠ e-liquid≈Ø, proto≈æe nereaguj√≠ s obsahem a neovliv≈àuj√≠ chu≈•. Tmav√© sklo (amber) chr√°n√≠ p≈ôed UV z√°≈ôen√≠m a prodlu≈æuje trvanlivost. Pro m√≠ch√°n√≠ jsou vhodn√© lahviƒçky s kap√°tkem nebo √∫zk√Ωm hrdlem. P≈ôed pou≈æit√≠m lahviƒçky v≈ædy d≈Økladnƒõ vyƒçistƒõte a osu≈°te.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Kap√°tko, pipeta nebo st≈ô√≠kaƒçka</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>Pro p≈ôesn√© d√°vkov√°n√≠ ingredienc√≠ jsou nezbytn√© mƒõ≈ôic√≠ n√°stroje. <strong>Kap√°tko:</strong> Vhodn√© pro men≈°√≠ objemy, m√©nƒõ p≈ôesn√©. <strong>Pipeta:</strong> P≈ôesnƒõj≈°√≠ ne≈æ kap√°tko, vhodn√° pro st≈ôedn√≠ objemy. <strong>St≈ô√≠kaƒçka (bez jehly):</strong> Nejp≈ôesnƒõj≈°√≠ varianta, ide√°ln√≠ pro nikotin. Pou≈æ√≠vejte samostatn√© n√°stroje pro ka≈ædou ingredienci, aby nedo≈°lo ke kontaminaci.</p>
                        </div>
                    </div>
                    <div class="prep-item-accordion">
                        <button class="prep-item-btn" onclick="togglePrepDetail(this)">
                            <span>Mƒõ≈ô√≠c√≠ pom≈Øcky</span>
                            <span class="prep-arrow">‚ñº</span>
                        </button>
                        <div class="prep-detail">
                            <p>Pro p≈ôesn√© m√≠ch√°n√≠ pot≈ôebujete spolehliv√© mƒõ≈ô√≠c√≠ pom≈Øcky. <strong>Odmƒõrn√© v√°lce:</strong> Pro mƒõ≈ôen√≠ objemu v ml. <strong>St≈ô√≠kaƒçky s mƒõ≈ôen√≠m:</strong> R≈Øzn√© velikosti pro r≈Øzn√© ingredience (1ml pro nikotin, 5-10ml pro VG/PG). V≈ædy mƒõ≈ôte dvakr√°t a m√≠chejte jednou!</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="neon-button" onclick="showPage('mode-select')">
                <span>ZAƒå√çT M√çCH√ÅN√ç</span>
                <div class="button-glow"></div>
            </button>
        </section>

        <!-- V√Ωbƒõr re≈æimu -->
        <section id="mode-select" class="page">
            <h2 class="page-title">Co chcete p≈ôipravit?</h2>
            
            <div class="mode-buttons">
                <button class="mode-button cyan" onclick="showPage('form')">
                    <div class="mode-title">eLiquid</div>
                    <div class="mode-desc">Kompletn√≠ e-liquid s p≈ô√≠chut√≠, nikotinem a nosnou l√°tkou</div>
                </button>
                
                <button class="mode-button pink" onclick="showPage('dilute-form')">
                    <div class="mode-title">≈òedƒõn√≠ nikotinov√© b√°ze</div>
                    <div class="mode-desc">Z≈ôedƒõn√≠ siln√© nikotinov√© b√°ze na po≈æadovanou koncentraci</div>
                </button>
            </div>
            
            <button class="neon-button secondary" onclick="showPage('intro')">
                <span>‚óÄ ZPƒöT</span>
            </button>
        </section>

        <!-- Formul√°≈ô pro ≈ôedƒõn√≠ nikotinu -->
        <section id="dilute-form" class="page">
            <h2 class="page-title">≈òedƒõn√≠ nikotinov√© b√°ze</h2>
            
            <!-- Volba mno≈æstv√≠ -->
            <div class="form-group">
                <label class="form-label">Mno≈æstv√≠</label>
                <div class="amount-choice-container">
                    <div class="amount-choice">
                        <input type="radio" id="amountFinal" name="amountType" value="final" checked onchange="updateDiluteAmountType()">
                        <label for="amountFinal">Kolik b√°ze chci nam√≠chat?</label>
                        <div class="input-wrapper">
                            <input type="number" id="diluteFinalAmount" min="1" max="1000" value="100" class="neon-input" oninput="updateDiluteCalculation()">
                            <span class="input-unit">ml</span>
                        </div>
                    </div>
                    <div class="amount-divider">nebo</div>
                    <div class="amount-choice">
                        <input type="radio" id="amountSource" name="amountType" value="source" onchange="updateDiluteAmountType()">
                        <label for="amountSource">Kolik b√°ze chci roz≈ôedit?</label>
                        <div class="input-wrapper">
                            <input type="number" id="diluteSourceAmount" min="1" max="1000" value="30" class="neon-input" disabled oninput="updateDiluteCalculation()">
                            <span class="input-unit">ml</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Nikotinov√° b√°ze - zdroj -->
            <div class="form-group">
                <label class="form-label">
                    Jak silnou m√°m nikotinovou b√°zi?
                    <span class="label-hint">√ödaje z obalu nikotinu</span>
                </label>
                <div class="dilute-nicotine-container">
                    <select id="diluteNicotineType" class="neon-select" onchange="updateDiluteNicotineType()">
                        <option value="freebase">Nikotin booster</option>
                        <option value="salt">Nikotinov√° s≈Øl</option>
                    </select>
                    <div class="input-wrapper">
                        <input type="number" id="diluteBaseStrength" min="3" max="200" value="20" class="neon-input medium" oninput="updateDiluteCalculation()">
                        <span class="input-unit">mg/ml</span>
                    </div>
                </div>
                <div class="form-group-sub">
                    <label class="form-label-small">Pomƒõr VG/PG v koncentr√°tu</label>
                    <div class="ratio-container compact">
                        <div class="ratio-labels">
                            <span class="ratio-label left">D√Ωm (VG)</span>
                            <span class="ratio-label right">Chu≈• (PG)</span>
                        </div>
                        <div class="slider-container">
                            <button class="slider-btn small" onclick="adjustDiluteSourceRatio(-5)">‚óÄ</button>
                            <div class="slider-wrapper">
                                <input type="range" id="diluteSourceRatio" min="0" max="100" value="50" class="ratio-slider" oninput="updateDiluteSourceRatioDisplay()">
                                <div class="slider-track" id="diluteSourceTrack"></div>
                            </div>
                            <button class="slider-btn small" onclick="adjustDiluteSourceRatio(5)">‚ñ∂</button>
                        </div>
                        <div class="ratio-display small">
                            <span id="diluteSourceVg">50</span>:<span id="diluteSourcePg">50</span>
                        </div>
                        <div class="ratio-description" id="diluteSourceDescription">
                            Vyv√°≈æen√Ω pomƒõr p√°ry a chuti, vhodn√Ω pro vƒõt≈°inu za≈ô√≠zen√≠.
                        </div>
                    </div>
                </div>
            </div>

            <!-- C√≠lov√° s√≠la a pomƒõr -->
            <div class="form-group">
                <label class="form-label">
                    Jak silnou nikotinovou b√°zi chci nam√≠chat?
                </label>
                <div class="input-wrapper">
                    <input type="number" id="diluteTargetStrength" min="1" max="200" value="6" class="neon-input medium" oninput="updateDiluteCalculation()">
                    <span class="input-unit">mg/ml</span>
                </div>
                <div id="diluteTargetWarning" class="input-warning hidden"></div>
                
                <div class="form-group-sub">
                    <label class="form-label-small">Pomƒõr VG/PG ve v√Ωsledn√© b√°zi</label>
                    <div class="ratio-container compact">
                        <div class="ratio-labels">
                            <span class="ratio-label left">D√Ωm (VG)</span>
                            <span class="ratio-label right">Chu≈• (PG)</span>
                        </div>
                        <div class="slider-container">
                            <button class="slider-btn small" onclick="adjustDiluteTargetRatio(-5)">‚óÄ</button>
                            <div class="slider-wrapper-with-limits">
                                <span class="slider-limit left">100</span>
                                <div class="slider-wrapper ratio-slider-wrapper">
                                    <div class="slider-disabled-zone left" id="diluteDisabledLeft"></div>
                                    <div class="slider-disabled-zone right" id="diluteDisabledRight"></div>
                                    <input type="range" id="diluteTargetRatio" min="0" max="100" value="50" class="ratio-slider" oninput="updateDiluteTargetRatioDisplay()">
                                    <div class="slider-track" id="diluteTargetTrack"></div>
                                    <div class="slider-center-mark"></div>
                                </div>
                                <span class="slider-limit right">100</span>
                            </div>
                            <button class="slider-btn small" onclick="adjustDiluteTargetRatio(5)">‚ñ∂</button>
                        </div>
                        <div class="ratio-display small">
                            <span id="diluteTargetVg">50</span>:<span id="diluteTargetPg">50</span>
                        </div>
                        <div class="ratio-description" id="diluteTargetDescription">
                            Vyv√°≈æen√Ω pomƒõr p√°ry a chuti, vhodn√Ω pro vƒõt≈°inu za≈ô√≠zen√≠.
                        </div>
                        <div id="diluteRatioWarning" class="input-warning hidden"></div>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="neon-button secondary" onclick="showPage('mode-select')">
                    <span>‚óÄ ZPƒöT</span>
                </button>
                <button class="neon-button" onclick="calculateDilution()">
                    <span>MIXUJ!</span>
                    <div class="button-glow"></div>
                </button>
            </div>
        </section>

        <!-- V√Ωsledky ≈ôedƒõn√≠ -->
        <section id="dilute-results" class="page">
            <h2 class="page-title">Recept na ≈ôedƒõn√≠</h2>
            
            <div class="results-summary">
                <div class="summary-item">
                    <span class="summary-label">Celkov√Ω objem:</span>
                    <span class="summary-value" id="diluteResultTotal">100 ml</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Pomƒõr VG/PG:</span>
                    <span class="summary-value" id="diluteResultRatio">50:50</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">S√≠la nikotinu:</span>
                    <span class="summary-value" id="diluteResultNicotine">6 mg/ml</span>
                </div>
            </div>

            <div class="results-table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Slo≈æka</th>
                            <th>Objem (ml)</th>
                            <th>Procento</th>
                        </tr>
                    </thead>
                    <tbody id="diluteResultsBody">
                    </tbody>
                </table>
            </div>

            <div class="results-notes">
                <h4>Pozn√°mky k ≈ôedƒõn√≠:</h4>
                <ul>
                    <li>Pracujte v rukavic√≠ch - nikotin se vst≈ôeb√°v√° k≈Ø≈æ√≠!</li>
                    <li>Nejprve nalijte nikotinovou b√°zi</li>
                    <li>Pot√© p≈ôidejte VG a PG</li>
                    <li>D≈Økladnƒõ prot≈ôepejte</li>
                </ul>
            </div>

            <div class="button-group">
                <button class="neon-button secondary" onclick="showPage('dilute-form')">
                    <span>‚óÄ UPRAVIT</span>
                </button>
            </div>
        </section>

        <!-- Formul√°≈ô -->
        <section id="form" class="page">
            <h2 class="page-title">Konfigurace smƒõsi</h2>
            
            <!-- Z√°lo≈æky pro v√Ωbƒõr typu formul√°≈ôe -->
            <div class="form-tabs">
                <button type="button" class="form-tab active" data-tab="liquid" onclick="switchFormTab('liquid')">Liquid</button>
                <button type="button" class="form-tab tab-green" data-tab="shakevape" onclick="switchFormTab('shakevape')">Shake & Vape</button>
                <button type="button" class="form-tab tab-red" data-tab="liquidpro" onclick="switchFormTab('liquidpro')">Liquid PRO</button>
            </div>

            <!-- ============================================ -->
            <!-- LIQUID - Standardn√≠ formul√°≈ô -->
            <!-- ============================================ -->
            <div id="form-liquid" class="form-content form-cyan active">
                <!-- Mno≈æstv√≠ liquidu -->
                <div class="form-group">
                    <label class="form-label">
                        Kolik liquidu chci nam√≠chat?
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="totalAmount" min="1" max="1000" value="100" class="neon-input">
                        <span class="input-unit">ml</span>
                    </div>
                </div>

                <!-- Nikotinov√° b√°ze -->
                <div class="form-group">
                    <label class="form-label">
                        Jak silnou m√°m nikotinovou b√°zi?
                        <span class="label-hint">Tyto √∫daje opi≈° z obalu nikotinu</span>
                    </label>
                    <div class="nicotine-base-container">
                        <select id="nicotineType" class="neon-select" onchange="updateNicotineType()">
                            <option value="none">Bez nikotinu</option>
                            <option value="freebase">Nikotin booster</option>
                            <option value="salt">Nikotinov√° s≈Øl</option>
                        </select>
                        <div id="nicotineStrengthContainer" class="hidden">
                            <input type="number" id="nicotineBaseStrength" min="3" max="200" value="20" class="neon-input medium">
                            <span class="input-unit">mg/ml</span>
                            <div id="nicotineWarning" class="input-warning hidden"></div>
                        </div>
                    </div>
                    <div id="nicotineRatioContainer" class="hidden">
                        <label class="form-label-small">Pomƒõr VG/PG v koncentr√°tu</label>
                        <div class="ratio-toggle-buttons">
                            <button type="button" id="ratio5050" class="ratio-toggle-btn active" data-value="50/50">50/50</button>
                            <button type="button" id="ratio7030" class="ratio-toggle-btn" data-value="70/30">70/30</button>
                        </div>
                        <input type="hidden" id="nicotineRatio" value="50/50">
                    </div>
                </div>

                <!-- C√≠lov√° s√≠la nikotinu -->
                <div class="form-group" id="targetNicotineGroup">
                    <label class="form-label">
                        Jak silnou chci fin√°ln√≠ nikotinovou b√°zi na vapov√°n√≠?
                    </label>
                    <div class="target-nicotine-container">
                        <div class="slider-container">
                            <button class="slider-btn" onclick="adjustTargetNicotine(-1)">‚óÄ</button>
                            <div class="slider-wrapper">
                                <input type="range" id="targetNicotine" min="0" max="45" value="0" class="nicotine-slider">
                                <div class="slider-track nicotine-track" id="nicotineTrack"></div>
                            </div>
                            <button class="slider-btn" onclick="adjustTargetNicotine(1)">‚ñ∂</button>
                        </div>
                        <div class="nicotine-display">
                            <span id="targetNicotineValue">0</span> mg/ml
                        </div>
                        <div class="nicotine-description" id="nicotineDescription">
                            Bez nikotinu - vhodn√© pro neku≈ô√°ky nebo postupn√© odvyk√°n√≠.
                        </div>
                    </div>
                </div>

                <!-- P≈ô√≠chu≈• -->
                <div class="form-group">
                    <label class="form-label">
                        P≈ô√≠chu≈•
                    </label>
                    <div class="flavor-container">
                        <select id="flavorType" class="neon-select" onchange="updateFlavorType()">
                            <option value="none">≈Ω√°dn√° (bez p≈ô√≠chutƒõ)</option>
                            <option value="fruit">Ovoce (jahoda, jablko)</option>
                            <option value="citrus">Citr√≥nov√© (citron, limeta)</option>
                            <option value="berry">Bobulov√© (bor≈Øvka, malina)</option>
                            <option value="tropical">Tropick√© (ananas, mango)</option>
                            <option value="tobacco">Tab√°kov√© (klasick√Ω, kub√°nsk√Ω)</option>
                            <option value="menthol">Mentol / M√°tov√©</option>
                            <option value="candy">Sladkosti (cukrov√≠, karamel)</option>
                            <option value="dessert">Dezerty (kol√°ƒç, pudink)</option>
                            <option value="bakery">Z√°kusky (tyƒçinka, donut)</option>
                            <option value="biscuit">Pi≈°kotov√© (vanilka, m√°slo)</option>
                            <option value="drink">N√°pojov√© (kola, ƒçaj)</option>
                            <option value="tobaccosweet">Tab√°k + sladk√© (custard tobacco)</option>
                            <option value="nuts">O≈ô√≠≈°kov√© (ara≈°√≠d, l√≠skov√Ω)</option>
                            <option value="spice">Ko≈ôenƒõn√© (sko≈ôice, pern√≠k)</option>
                        </select>
                        <div id="flavorStrengthContainer" class="hidden">
                            <div class="slider-container small">
                                <button class="slider-btn small" onclick="adjustFlavor(-1)">‚óÄ</button>
                                <div class="slider-wrapper">
                                    <input type="range" id="flavorStrength" min="0" max="30" value="10" class="flavor-slider">
                                    <div class="slider-track flavor-track" id="flavorTrack"></div>
                                </div>
                                <button class="slider-btn small" onclick="adjustFlavor(1)">‚ñ∂</button>
                            </div>
                            <div class="flavor-display">
                                <span id="flavorValue">10</span>%
                            </div>
                            <div class="flavor-description" id="flavorDescription">
                                Ide√°ln√≠ chu≈•
                            </div>
                            <div class="form-group-sub">
                                <label class="form-label-small">Pomƒõr VG/PG v p≈ô√≠chuti</label>
                                <div class="ratio-toggle-buttons">
                                    <button type="button" id="flavorRatio0100" class="ratio-toggle-btn active" data-value="0/100">0/100</button>
                                    <button type="button" id="flavorRatio8020" class="ratio-toggle-btn" data-value="80/20">80/20</button>
                                    <button type="button" id="flavorRatio7030" class="ratio-toggle-btn" data-value="70/30">70/30</button>
                                </div>
                                <input type="hidden" id="flavorRatio" value="0/100">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pomƒõr VG/PG ve v√Ωsledn√©m liquidu -->
                <div class="form-group" id="vgPgRatioGroup">
                    <label class="form-label">
                        Pomƒõr VG/PG ve v√Ωsledn√©m liquidu
                    </label>
                    <div class="ratio-container">
                        <div class="ratio-labels">
                            <span class="ratio-label left">D√Ωm (VG)</span>
                            <span class="ratio-label right">Chu≈• (PG)</span>
                        </div>
                        <div class="slider-container">
                            <button class="slider-btn" onclick="adjustRatio(-5)">‚óÄ</button>
                            <div class="slider-wrapper-with-limits">
                                <span class="slider-limit left">100</span>
                                <div class="slider-wrapper ratio-slider-wrapper">
                                    <div class="slider-disabled-zone left" id="sliderDisabledLeft">
                                        <span class="limit-value" id="limitValueLeft"></span>
                                    </div>
                                    <div class="slider-disabled-zone right" id="sliderDisabledRight">
                                        <span class="limit-value" id="limitValueRight"></span>
                                    </div>
                                    <input type="range" id="vgPgRatio" min="0" max="100" value="50" class="ratio-slider">
                                    <div class="slider-track" id="sliderTrack"></div>
                                    <div class="slider-center-mark"></div>
                                </div>
                                <span class="slider-limit right">100</span>
                            </div>
                            <button class="slider-btn" onclick="adjustRatio(5)">‚ñ∂</button>
                        </div>
                        <div class="ratio-display">
                            <span id="vgValue">50</span>:<span id="pgValue">50</span>
                        </div>
                        <div class="ratio-description" id="ratioDescription">
                            Vyv√°≈æen√Ω pomƒõr p√°ry a chuti, vhodn√Ω pro vƒõt≈°inu za≈ô√≠zen√≠.
                        </div>
                        <div id="ratioLimitWarning" class="input-warning hidden"></div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="neon-button secondary" onclick="showPage('mode-select')">
                        <span>‚óÄ ZPƒöT</span>
                    </button>
                    <button class="neon-button" onclick="calculateMix()">
                        <span>MIXUJ!</span>
                        <div class="button-glow"></div>
                    </button>
                </div>
            </div>

            <!-- ============================================ -->
            <!-- SHAKE & VAPE - Neonovƒõ zelen√Ω formul√°≈ô -->
            <!-- ============================================ -->
            <div id="form-shakevape" class="form-content form-green">
                <!-- Celkov√Ω objem n√°doby -->
                <div class="form-group">
                    <label class="form-label">
                        Celkov√Ω objem n√°doby Shake & Vape?
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="svTotalAmount" min="1" max="1000" value="60" class="neon-input">
                        <span class="input-unit">ml</span>
                    </div>
                </div>

                <!-- Objem p≈ô√≠chutƒõ - druh√© pole -->
                <div class="form-group">
                    <label class="form-label">
                        Objem p≈ô√≠chutƒõ
                        <span class="label-hint">Objem p≈ô√≠chutƒõ ji≈æ v lahviƒçce</span>
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="svFlavorVolume" min="0" max="100" value="12" class="neon-input" oninput="updateSvCalculation()">
                        <span class="input-unit">ml</span>
                    </div>
                    <div class="form-group-sub">
                        <label class="form-label-small">Pomƒõr VG/PG v p≈ô√≠chuti</label>
                        <div class="ratio-toggle-buttons">
                            <button type="button" id="svFlavorRatio0100" class="ratio-toggle-btn active" data-value="0/100">0/100</button>
                            <button type="button" id="svFlavorRatio8020" class="ratio-toggle-btn" data-value="80/20">80/20</button>
                            <button type="button" id="svFlavorRatio7030" class="ratio-toggle-btn" data-value="70/30">70/30</button>
                        </div>
                        <input type="hidden" id="svFlavorRatio" value="0/100">
                    </div>
                </div>

                <!-- Nikotinov√° b√°ze -->
                <div class="form-group">
                    <label class="form-label">
                        Jak silnou m√°m nikotinovou b√°zi?
                        <span class="label-hint">Tyto √∫daje opi≈° z obalu nikotinu</span>
                    </label>
                    <div class="nicotine-base-container">
                        <select id="svNicotineType" class="neon-select" onchange="updateSvNicotineType()">
                            <option value="none">Bez nikotinu</option>
                            <option value="freebase">Nikotin booster</option>
                            <option value="salt">Nikotinov√° s≈Øl</option>
                        </select>
                        <div id="svNicotineStrengthContainer" class="hidden">
                            <input type="number" id="svNicotineBaseStrength" min="3" max="200" value="20" class="neon-input medium">
                            <span class="input-unit">mg/ml</span>
                        </div>
                    </div>
                    <div id="svNicotineRatioContainer" class="hidden">
                        <label class="form-label-small">Pomƒõr VG/PG v koncentr√°tu</label>
                        <div class="ratio-toggle-buttons">
                            <button type="button" id="svRatio5050" class="ratio-toggle-btn active" data-value="50/50">50/50</button>
                            <button type="button" id="svRatio7030" class="ratio-toggle-btn" data-value="70/30">70/30</button>
                        </div>
                        <input type="hidden" id="svNicotineRatio" value="50/50">
                    </div>
                </div>

                <!-- C√≠lov√° s√≠la nikotinu -->
                <div class="form-group" id="svTargetNicotineGroup">
                    <label class="form-label">
                        Jak silnou chci fin√°ln√≠ nikotinovou b√°zi na vapov√°n√≠?
                    </label>
                    <div class="target-nicotine-container">
                        <div class="slider-container">
                            <button class="slider-btn" onclick="adjustSvTargetNicotine(-1)">‚óÄ</button>
                            <div class="slider-wrapper">
                                <input type="range" id="svTargetNicotine" min="0" max="45" value="0" class="nicotine-slider">
                                <div class="slider-track nicotine-track" id="svNicotineTrack"></div>
                            </div>
                            <button class="slider-btn" onclick="adjustSvTargetNicotine(1)">‚ñ∂</button>
                        </div>
                        <div class="nicotine-display">
                            <span id="svTargetNicotineValue">0</span> mg/ml
                        </div>
                        <div class="nicotine-description" id="svNicotineDescription">
                            Bez nikotinu - vhodn√© pro neku≈ô√°ky nebo postupn√© odvyk√°n√≠.
                        </div>
                    </div>
                </div>

                <!-- Pomƒõr VG/PG ve v√Ωsledn√©m liquidu -->
                <div class="form-group">
                    <label class="form-label">
                        Pomƒõr VG/PG ve v√Ωsledn√©m liquidu
                    </label>
                    <div class="ratio-container">
                        <div class="ratio-labels">
                            <span class="ratio-label left">D√Ωm (VG)</span>
                            <span class="ratio-label right">Chu≈• (PG)</span>
                        </div>
                        <div class="slider-container">
                            <button class="slider-btn" onclick="adjustSvRatio(-5)">‚óÄ</button>
                            <div class="slider-wrapper-with-limits">
                                <span class="slider-limit left">100</span>
                                <div class="slider-wrapper ratio-slider-wrapper">
                                    <div class="slider-disabled-zone left" id="svSliderDisabledLeft"></div>
                                    <div class="slider-disabled-zone right" id="svSliderDisabledRight"></div>
                                    <input type="range" id="svVgPgRatio" min="0" max="100" value="50" class="ratio-slider" oninput="updateSvRatioDisplay()">
                                    <div class="slider-track" id="svSliderTrack"></div>
                                    <div class="slider-center-mark"></div>
                                </div>
                                <span class="slider-limit right">100</span>
                            </div>
                            <button class="slider-btn" onclick="adjustSvRatio(5)">‚ñ∂</button>
                        </div>
                        <div class="ratio-display">
                            <span id="svVgValue">50</span>:<span id="svPgValue">50</span>
                        </div>
                        <div class="ratio-description" id="svRatioDescription">
                            Vyv√°≈æen√Ω pomƒõr p√°ry a chuti, vhodn√Ω pro vƒõt≈°inu za≈ô√≠zen√≠.
                        </div>
                        <div id="svRatioLimitWarning" class="input-warning hidden"></div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="neon-button secondary" onclick="showPage('mode-select')">
                        <span>‚óÄ ZPƒöT</span>
                    </button>
                    <button class="neon-button btn-green" onclick="calculateShakeVape()">
                        <span>MIXUJ!</span>
                        <div class="button-glow"></div>
                    </button>
                </div>
            </div>

            <!-- ============================================ -->
            <!-- LIQUID PRO - Neonovƒõ ƒçerven√Ω formul√°≈ô -->
            <!-- ============================================ -->
            <div id="form-liquidpro" class="form-content form-red">
                <!-- Mno≈æstv√≠ liquidu -->
                <div class="form-group">
                    <label class="form-label">
                        Kolik liquidu chci nam√≠chat?
                    </label>
                    <div class="input-wrapper">
                        <input type="number" id="proTotalAmount" min="1" max="1000" value="100" class="neon-input">
                        <span class="input-unit">ml</span>
                    </div>
                </div>

                <!-- Nikotinov√° b√°ze s VG/PG sliderem -->
                <div class="form-group">
                    <label class="form-label">
                        Jak silnou m√°m nikotinovou b√°zi?
                        <span class="label-hint">Tyto √∫daje opi≈° z obalu nikotinu</span>
                    </label>
                    <div class="nicotine-base-container">
                        <select id="proNicotineType" class="neon-select" onchange="updateProNicotineType()">
                            <option value="none">Bez nikotinu</option>
                            <option value="freebase">Nikotin booster</option>
                            <option value="salt">Nikotinov√° s≈Øl</option>
                        </select>
                        <div id="proNicotineStrengthContainer" class="hidden">
                            <input type="number" id="proNicotineBaseStrength" min="3" max="200" value="20" class="neon-input medium">
                            <span class="input-unit">mg/ml</span>
                        </div>
                    </div>
                    <div id="proNicotineRatioContainer" class="hidden">
                        <label class="form-label-small">Pomƒõr VG/PG v koncentr√°tu nikotinu</label>
                        <div class="ratio-container compact">
                            <div class="ratio-labels">
                                <span class="ratio-label left">D√Ωm (VG)</span>
                                <span class="ratio-label right">Chu≈• (PG)</span>
                            </div>
                            <div class="slider-container">
                                <button class="slider-btn small" onclick="adjustProNicRatio(-5)">‚óÄ</button>
                                <div class="slider-wrapper">
                                    <input type="range" id="proNicotineRatioSlider" min="0" max="100" value="50" class="ratio-slider" oninput="updateProNicRatioDisplay()">
                                    <div class="slider-track" id="proNicotineTrackRatio"></div>
                                </div>
                                <button class="slider-btn small" onclick="adjustProNicRatio(5)">‚ñ∂</button>
                            </div>
                            <div class="ratio-display small">
                                <span id="proNicVgValue">50</span>:<span id="proNicPgValue">50</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- C√≠lov√° s√≠la nikotinu -->
                <div class="form-group" id="proTargetNicotineGroup">
                    <label class="form-label">
                        Jak silnou chci fin√°ln√≠ nikotinovou b√°zi na vapov√°n√≠?
                    </label>
                    <div class="target-nicotine-container">
                        <div class="slider-container">
                            <button class="slider-btn" onclick="adjustProTargetNicotine(-1)">‚óÄ</button>
                            <div class="slider-wrapper">
                                <input type="range" id="proTargetNicotine" min="0" max="45" value="0" class="nicotine-slider">
                                <div class="slider-track nicotine-track" id="proNicotineTrack"></div>
                            </div>
                            <button class="slider-btn" onclick="adjustProTargetNicotine(1)">‚ñ∂</button>
                        </div>
                        <div class="nicotine-display">
                            <span id="proTargetNicotineValue">0</span> mg/ml
                        </div>
                    </div>
                </div>

                <!-- P≈ô√≠chu≈• s VG/PG sliderem -->
                <div class="form-group">
                    <label class="form-label">
                        P≈ô√≠chu≈•
                    </label>
                    <div class="flavor-container">
                        <select id="proFlavorType" class="neon-select" onchange="updateProFlavorType()">
                            <option value="none">≈Ω√°dn√° (bez p≈ô√≠chutƒõ)</option>
                            <option value="fruit">Ovoce (jahoda, jablko)</option>
                            <option value="citrus">Citr√≥nov√© (citron, limeta)</option>
                            <option value="berry">Bobulov√© (bor≈Øvka, malina)</option>
                            <option value="tropical">Tropick√© (ananas, mango)</option>
                            <option value="tobacco">Tab√°kov√© (klasick√Ω, kub√°nsk√Ω)</option>
                            <option value="menthol">Mentol / M√°tov√©</option>
                            <option value="candy">Sladkosti (cukrov√≠, karamel)</option>
                            <option value="dessert">Dezerty (kol√°ƒç, pudink)</option>
                            <option value="bakery">Z√°kusky (tyƒçinka, donut)</option>
                            <option value="biscuit">Pi≈°kotov√© (vanilka, m√°slo)</option>
                            <option value="drink">N√°pojov√© (kola, ƒçaj)</option>
                            <option value="tobaccosweet">Tab√°k + sladk√© (custard tobacco)</option>
                            <option value="nuts">O≈ô√≠≈°kov√© (ara≈°√≠d, l√≠skov√Ω)</option>
                            <option value="spice">Ko≈ôenƒõn√© (sko≈ôice, pern√≠k)</option>
                        </select>
                        <div id="proFlavorStrengthContainer" class="hidden">
                            <div class="slider-container small">
                                <button class="slider-btn small" onclick="adjustProFlavor(-1)">‚óÄ</button>
                                <div class="slider-wrapper">
                                    <input type="range" id="proFlavorStrength" min="0" max="30" value="10" class="flavor-slider">
                                    <div class="slider-track flavor-track" id="proFlavorTrack"></div>
                                </div>
                                <button class="slider-btn small" onclick="adjustProFlavor(1)">‚ñ∂</button>
                            </div>
                            <div class="flavor-display">
                                <span id="proFlavorValue">10</span>%
                            </div>
                            
                            <!-- VG/PG pomƒõr pro p≈ô√≠chu≈• -->
                            <div class="form-group-sub">
                                <label class="form-label-small">Pomƒõr VG/PG v koncentr√°tu p≈ô√≠chutƒõ</label>
                                <div class="ratio-container compact">
                                    <div class="ratio-labels">
                                        <span class="ratio-label left">D√Ωm (VG)</span>
                                        <span class="ratio-label right">Chu≈• (PG)</span>
                                    </div>
                                    <div class="slider-container">
                                        <button class="slider-btn small" onclick="adjustProFlavorRatio(-5)">‚óÄ</button>
                                        <div class="slider-wrapper">
                                            <input type="range" id="proFlavorRatioSlider" min="0" max="100" value="0" class="ratio-slider" oninput="updateProFlavorRatioDisplay()">
                                            <div class="slider-track" id="proFlavorTrackRatio"></div>
                                        </div>
                                        <button class="slider-btn small" onclick="adjustProFlavorRatio(5)">‚ñ∂</button>
                                    </div>
                                    <div class="ratio-display small">
                                        <span id="proFlavorVgValue">0</span>:<span id="proFlavorPgValue">100</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pomƒõr VG/PG ve v√Ωsledn√©m liquidu -->
                <div class="form-group">
                    <label class="form-label">
                        Pomƒõr VG/PG ve v√Ωsledn√©m liquidu
                    </label>
                    <div class="ratio-container">
                        <div class="ratio-labels">
                            <span class="ratio-label left">D√Ωm (VG)</span>
                            <span class="ratio-label right">Chu≈• (PG)</span>
                        </div>
                        <div class="slider-container">
                            <button class="slider-btn" onclick="adjustProRatio(-5)">‚óÄ</button>
                            <div class="slider-wrapper-with-limits">
                                <span class="slider-limit left">100</span>
                                <div class="slider-wrapper ratio-slider-wrapper">
                                    <div class="slider-disabled-zone left" id="proSliderDisabledLeft"></div>
                                    <div class="slider-disabled-zone right" id="proSliderDisabledRight"></div>
                                    <input type="range" id="proVgPgRatio" min="0" max="100" value="50" class="ratio-slider" oninput="updateProRatioDisplay()">
                                    <div class="slider-track" id="proSliderTrack"></div>
                                    <div class="slider-center-mark"></div>
                                </div>
                                <span class="slider-limit right">100</span>
                            </div>
                            <button class="slider-btn" onclick="adjustProRatio(5)">‚ñ∂</button>
                        </div>
                        <div class="ratio-display">
                            <span id="proVgValue">50</span>:<span id="proPgValue">50</span>
                        </div>
                        <div id="proRatioLimitWarning" class="input-warning hidden"></div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="neon-button secondary" onclick="showPage('mode-select')">
                        <span>‚óÄ ZPƒöT</span>
                    </button>
                    <button class="neon-button btn-red" onclick="calculateProMix()">
                        <span>MIXUJ!</span>
                        <div class="button-glow"></div>
                    </button>
                </div>
            </div>
        </section>

        <!-- V√Ωsledky -->
        <section id="results" class="page">
            <h2 class="page-title">Tv≈Øj recept</h2>
            
            <div class="results-summary">
                <div class="summary-item">
                    <span class="summary-label">Celkov√Ω objem:</span>
                    <span class="summary-value" id="resultTotal">100 ml</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">Pomƒõr VG/PG:</span>
                    <span class="summary-value" id="resultRatio">50:50</span>
                </div>
                <div class="summary-item">
                    <span class="summary-label">S√≠la nikotinu:</span>
                    <span class="summary-value" id="resultNicotine">0 mg/ml</span>
                </div>
            </div>

            <div class="results-table-container">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>Slo≈æka</th>
                            <th>Objem (ml)</th>
                            <th>Kapky</th>
                            <th>Procento</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                    </tbody>
                </table>
            </div>

            <div class="results-notes">
                <h4>Pozn√°mky k m√≠ch√°n√≠:</h4>
                <ul>
                    <li>Nejprve p≈ôidejte nikotin (pokud pou≈æ√≠v√°te)</li>
                    <li>Pot√© p≈ôidejte p≈ô√≠chutƒõ</li>
                    <li>Nakonec dopl≈àte PG a VG</li>
                    <li>D≈Økladnƒõ prot≈ôepejte a nechte zr√°t 1-2 t√Ωdny</li>
                </ul>
            </div>

            <div class="button-group">
                <button class="neon-button secondary" onclick="showPage('form')">
                    <span>‚óÄ UPRAVIT</span>
                </button>
                <button class="neon-button" onclick="showSaveRecipeModal()" id="saveRecipeBtn">
                    <span>ULO≈ΩIT</span>
                </button>
            </div>
        </section>

        <!-- Ulo≈æen√≠ receptu modal -->
        <div id="saveRecipeModal" class="modal hidden">
            <div class="modal-content">
                <button class="menu-close" onclick="hideSaveRecipeModal()">‚úï</button>
                <h3 class="menu-title">Ulo≈æit recept</h3>
                <form class="save-recipe-form" onsubmit="return saveRecipe(event)">
                    <div class="form-group-login">
                        <label class="login-label">N√°zev receptu *</label>
                        <input type="text" id="recipeName" class="login-input" placeholder="M≈Øj obl√≠ben√Ω liquid" required>
                    </div>
                    <div class="form-group-login">
                        <label class="login-label">Popis</label>
                        <textarea id="recipeDescription" class="login-input contact-textarea" placeholder="Popis receptu, pozn√°mky k zr√°n√≠..."></textarea>
                    </div>
                    <div class="form-group-login">
                        <label class="login-label">Hodnocen√≠</label>
                        <div class="star-rating" id="starRating">
                            <span class="star" data-rating="1">‚òÖ</span>
                            <span class="star" data-rating="2">‚òÖ</span>
                            <span class="star" data-rating="3">‚òÖ</span>
                            <span class="star" data-rating="4">‚òÖ</span>
                            <span class="star" data-rating="5">‚òÖ</span>
                        </div>
                        <input type="hidden" id="recipeRating" value="0">
                    </div>
                    <button type="submit" class="neon-button">Ulo≈æit recept</button>
                </form>
            </div>
        </div>

        <!-- M√© recepty str√°nka -->
        <section id="my-recipes" class="page">
            <h2 class="page-title">M√© recepty</h2>
            
            <!-- Vyhled√°vac√≠ li≈°ta recept≈Ø -->
            <div class="recipes-search-bar">
                <div class="search-row">
                    <div class="search-field search-text">
                        <label for="recipeSearchText">üîç Hledat</label>
                        <input type="text" id="recipeSearchText" placeholder="N√°zev nebo popis..." oninput="filterRecipes()">
                    </div>
                    <div class="search-field search-rating">
                        <label>‚≠ê Hodnocen√≠</label>
                        <div class="search-stars" id="recipeSearchStars">
                            <span class="search-star" data-rating="1" onclick="setRecipeSearchRating(1)">‚òÜ</span>
                            <span class="search-star" data-rating="2" onclick="setRecipeSearchRating(2)">‚òÜ</span>
                            <span class="search-star" data-rating="3" onclick="setRecipeSearchRating(3)">‚òÜ</span>
                            <span class="search-star" data-rating="4" onclick="setRecipeSearchRating(4)">‚òÜ</span>
                            <span class="search-star" data-rating="5" onclick="setRecipeSearchRating(5)">‚òÜ</span>
                            <button class="clear-rating-btn" onclick="clearRecipeSearchRating()" title="Zru≈°it filtr">‚úï</button>
                        </div>
                    </div>
                </div>
                <div class="search-results-info" id="recipeSearchResultsInfo"></div>
            </div>
            
            <div id="recipesListContainer">
                <p class="no-recipes-text">Zat√≠m nem√°te ≈æ√°dn√© ulo≈æen√© recepty.</p>
            </div>
            <div class="button-group">
                <button class="neon-button secondary" onclick="showPage('intro')">
                    <span>‚óÄ ZPƒöT</span>
                </button>
            </div>
        </section>

        <!-- Detail receptu str√°nka -->
        <section id="recipe-detail" class="page">
            <h2 class="page-title" id="recipeDetailTitle">Detail receptu</h2>
            
            <div class="recipe-detail-content" id="recipeDetailContent">
                <!-- Napln√≠ se JavaScriptem -->
            </div>
            
            <div class="button-group">
                <button class="neon-button secondary" onclick="showPage('my-recipes')">
                    <span>‚óÄ ZPƒöT</span>
                </button>
                <button class="neon-button" onclick="editSavedRecipe()">
                    <span>‚úèÔ∏è UPRAVIT</span>
                </button>
                <button class="neon-button btn-green" onclick="shareRecipe()">
                    <span>üì§ SD√çLET</span>
                </button>
            </div>
        </section>

        <!-- Sd√≠len√Ω recept str√°nka -->
        <section id="shared-recipe" class="page">
            <h2 class="page-title" id="sharedRecipeTitle">Sd√≠len√Ω recept</h2>
            
            <div class="recipe-detail-content" id="sharedRecipeContent">
                <!-- Napln√≠ se JavaScriptem -->
            </div>
            
            <div class="button-group">
                <button class="neon-button" onclick="showPage('intro')">
                    <span>üè† DOM≈Æ</span>
                </button>
            </div>
        </section>

        <!-- Obl√≠ben√© produkty - seznam -->
        <section id="favorite-products" class="page">
            <h2 class="page-title">Obl√≠ben√© produkty</h2>
            
            <div class="products-header">
                <button class="neon-button btn-green" onclick="showAddProductForm()">
                    <span>+ P≈òIDAT NOV√ù</span>
                </button>
            </div>
            
            <!-- Vyhled√°vac√≠ li≈°ta -->
            <div class="products-search-bar">
                <div class="search-row">
                    <div class="search-field search-text">
                        <label for="productSearchText">üîç Hledat</label>
                        <input type="text" id="productSearchText" placeholder="N√°zev nebo popis..." oninput="filterProducts()">
                    </div>
                    <div class="search-field search-type">
                        <label for="productSearchType">üì¶ Typ</label>
                        <select id="productSearchType" onchange="filterProducts()">
                            <option value="">V≈°echny typy</option>
                            <option value="vg">VG (Glycerin)</option>
                            <option value="pg">PG (Propylenglykol)</option>
                            <option value="flavor">P≈ô√≠chu≈•</option>
                            <option value="nicotine_booster">Nikotin booster</option>
                            <option value="nicotine_salt">Nikotinov√° s≈Øl</option>
                        </select>
                    </div>
                    <div class="search-field search-rating">
                        <label>‚≠ê Hodnocen√≠</label>
                        <div class="search-stars" id="searchStars">
                            <span class="search-star" data-rating="1" onclick="setSearchRating(1)">‚òÜ</span>
                            <span class="search-star" data-rating="2" onclick="setSearchRating(2)">‚òÜ</span>
                            <span class="search-star" data-rating="3" onclick="setSearchRating(3)">‚òÜ</span>
                            <span class="search-star" data-rating="4" onclick="setSearchRating(4)">‚òÜ</span>
                            <span class="search-star" data-rating="5" onclick="setSearchRating(5)">‚òÜ</span>
                            <button class="clear-rating-btn" onclick="clearSearchRating()" title="Zru≈°it filtr">‚úï</button>
                        </div>
                    </div>
                </div>
                <div class="search-results-info" id="searchResultsInfo"></div>
            </div>
            
            <div id="productsListContainer">
                <p class="no-products-text">Zat√≠m nem√°te ≈æ√°dn√© obl√≠ben√© produkty.</p>
            </div>
            
            <div class="button-group">
                <button class="neon-button secondary" onclick="showPage('intro')">
                    <span>‚óÄ ZPƒöT</span>
                </button>
            </div>
        </section>

        <!-- Detail produktu str√°nka -->
        <section id="product-detail" class="page">
            <h2 class="page-title" id="productDetailTitle">Detail produktu</h2>
            
            <div class="product-detail-content" id="productDetailContent">
                <!-- Napln√≠ se JavaScriptem -->
            </div>
            
            <div class="button-group">
                <button class="neon-button secondary" onclick="showFavoriteProducts()">
                    <span>‚óÄ ZPƒöT</span>
                </button>
                <button class="neon-button" onclick="editProduct()">
                    <span>‚úèÔ∏è UPRAVIT</span>
                </button>
                <button class="neon-button btn-red" onclick="deleteProduct()">
                    <span>üóëÔ∏è SMAZAT</span>
                </button>
            </div>
        </section>

        <!-- Formul√°≈ô pro p≈ôid√°n√≠/√∫pravu produktu -->
        <section id="product-form" class="page">
            <h2 class="page-title" id="productFormTitle">P≈ôidat produkt</h2>
            
            <form id="productForm" class="product-form" onsubmit="return saveProduct(event)">
                <div class="form-group">
                    <label for="productName">N√°zev *</label>
                    <input type="text" id="productName" required maxlength="200" placeholder="N√°zev produktu">
                </div>
                
                <div class="form-group">
                    <label for="productType">Typ produktu *</label>
                    <select id="productType" required class="product-select">
                        <option value="">-- Vyberte typ --</option>
                        <option value="vg">VG (Glycerin)</option>
                        <option value="pg">PG (Propylenglykol)</option>
                        <option value="flavor">P≈ô√≠chu≈•</option>
                        <option value="nicotine_booster">Nikotin booster</option>
                        <option value="nicotine_salt">Nikotinov√° s≈Øl</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="productDescription">Popis</label>
                    <textarea id="productDescription" maxlength="2000" rows="4" placeholder="Popis produktu..."></textarea>
                </div>
                
                <div class="form-group">
                    <label>Hodnocen√≠</label>
                    <div class="star-rating product-star-rating" id="productStarRating">
                        <span class="star" data-rating="1">‚òÜ</span>
                        <span class="star" data-rating="2">‚òÜ</span>
                        <span class="star" data-rating="3">‚òÜ</span>
                        <span class="star" data-rating="4">‚òÜ</span>
                        <span class="star" data-rating="5">‚òÜ</span>
                    </div>
                    <input type="hidden" id="productRating" value="0">
                </div>
                
                <div class="form-group">
                    <label for="productUrl">URL odkaz na produkt</label>
                    <input type="url" id="productUrl" placeholder="https://...">
                </div>
                
                <div class="form-group">
                    <label>Fotografie</label>
                    <div class="image-upload-container">
                        <div class="image-preview" id="productImagePreview">
                            <span class="image-placeholder">üì∑</span>
                        </div>
                        <div class="image-upload-buttons">
                            <label class="neon-button secondary upload-btn">
                                <span>üìÅ Vybrat z galerie</span>
                                <input type="file" id="productImageFile" accept="image/*" onchange="previewProductImage(event)" hidden>
                            </label>
                            <button type="button" class="neon-button secondary mobile-only" onclick="captureProductPhoto()">
                                <span>üì∏ Vyfotit</span>
                            </button>
                        </div>
                        <input type="hidden" id="productImageUrl" value="">
                    </div>
                </div>
                
                <input type="hidden" id="editingProductId" value="">
                
                <div class="button-group form-buttons">
                    <button type="button" class="neon-button secondary" onclick="cancelProductForm()">
                        <span>‚óÄ ZPƒöT</span>
                    </button>
                    <button type="submit" class="neon-button btn-green">
                        <span>üíæ ULO≈ΩIT</span>
                    </button>
                </div>
            </form>
        </section>
    </div>

    <script src="/app.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('LiquiMixer SW registered:', registration.scope);
                        
                        // Kontrola aktualizac√≠
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            console.log('LiquiMixer SW: Update found');
                            
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // Nov√° verze je p≈ôipravena
                                    console.log('LiquiMixer SW: New version ready');
                                    if (confirm('Je dostupn√° nov√° verze aplikace. Chcete ji naƒç√≠st?')) {
                                        newWorker.postMessage('skipWaiting');
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.log('LiquiMixer SW registration failed:', error);
                    });
            });
            
            // Poslouch√°n√≠ zpr√°v od Service Workeru
            navigator.serviceWorker.addEventListener('message', (event) => {
                if (event.data && event.data.type === 'SW_UPDATED') {
                    console.log('LiquiMixer SW: Updated to', event.data.version);
                    // Automaticky obnovit str√°nku p≈ôi aktualizaci
                    window.location.reload();
                }
            });
            
            // Kontrola aktualizac√≠ p≈ôi n√°vratu na str√°nku
            document.addEventListener('visibilitychange', () => {
                if (document.visibilityState === 'visible') {
                    navigator.serviceWorker.ready.then((registration) => {
                        registration.update();
                    });
                }
            });
        }
    </script>
    
    <!-- Install prompt for PWA (Android) -->
    <div id="installPrompt" class="install-prompt hidden">
        <div class="install-content">
            <p>Nainstalovat LiquiMixer na v√°≈° telefon?</p>
            <div class="install-buttons">
                <button id="installBtn" class="neon-button small">Instalovat</button>
                <button id="dismissBtn" class="neon-button secondary small">Pozdƒõji</button>
            </div>
        </div>
    </div>
    
    <!-- Install prompt for iOS -->
    <div id="iosInstallPrompt" class="install-prompt ios-prompt hidden">
        <div class="install-content">
            <p>Nainstalovat LiquiMixer na v√°≈° iPhone?</p>
            <div class="ios-instructions">
                <div class="ios-step">
                    <span class="ios-step-number">1</span>
                    <span>Klepnƒõte na ikonu <span class="ios-share-icon">‚¨Ü</span> (Sd√≠let)</span>
                </div>
                <div class="ios-step">
                    <span class="ios-step-number">2</span>
                    <span>Vyberte "P≈ôidat na plochu"</span>
                </div>
                <div class="ios-step">
                    <span class="ios-step-number">3</span>
                    <span>Potvrƒète klepnut√≠m na "P≈ôidat"</span>
                </div>
            </div>
            <div class="install-buttons">
                <button id="iosDismissBtn" class="neon-button secondary small">Rozum√≠m</button>
            </div>
        </div>
    </div>
</body>
</html>

